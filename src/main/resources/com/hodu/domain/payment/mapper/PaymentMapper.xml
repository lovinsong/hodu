<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hodu.domain.payment.mapper.PaymentMapper">

	<!-- 한명 정보만 불러오기 -->
	<select id="memberInfo"
		resultType="com.hodu.domain.model.MemberDTO">
		SELECT * FROM HODU_MEMBER WHERE member_id = #{member_id}
	</select>

	<!-- 결제 하기
	<update id="changehodu" parameterType="com.hodu.domain.model.PaymentDTO">
		UPDATE hodu_member SET member_cash = member_cash -
		(SELECT item_price FROM item_board WHERE item_code = {#item_code} )
		WHERE member_id = #{member_id}
	</update> -->

	<!-- 멤버 호두 가져오기 -->
	<select id="membercash"
		resultType="com.hodu.domain.model.MemberDTO">
		SELECT member_cash FROM HODU_MEMBER WHERE member_id = #{member_id}
	</select>

	<!-- 가격 가져오기 -->
	<select id="itemprice"
		resultType="com.hodu.domain.model.ItemDTO">
		SELECT item_price FROM item_board WHERE item_code = #{item_code}
	</select>

	<!-- 수강 인원 빼기
	<update id="changestudent">
		UPDATE item_select SET item_people = item_people -
		#{apply_people} WHERE sel_postnum = #{sel_postnum}
	</update> -->

	<update id="changemoney">
		UPDATE hodu_member SET member_cash = member_cash -
		(SELECT item_price FROM item_board WHERE item_code = {#arg0} )
		WHERE member_id = #{arg1}
	</update>

</mapper>